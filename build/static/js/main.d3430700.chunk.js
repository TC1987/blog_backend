(this.webpackJsonpfinal_frontend=this.webpackJsonpfinal_frontend||[]).push([[0],{11:function(e,t,a){e.exports={container:"register_container__1j-3H",image:"register_image__3TRaK",form:"register_form__3dgpP",form__field:"register_form__field__1eKyV",form__button:"register_form__button__-odaS",bold:"register_bold__3BFmw",link:"register_link__1RSaf",validationError:"register_validationError__3Iy0n"}},16:function(e,t,a){e.exports={container:"login_container__2X9PK",image:"login_image__1AiCp",heading:"login_heading__3KtmN",heading__bold:"login_heading__bold__22Vg5",form:"login_form__2PLRu",form__field:"login_form__field__3CzoO",form__button:"login_form__button__D6UIy",bold:"login_bold__ZI4Nt",link:"login_link__26kum",validationError:"login_validationError__3-kqB"}},17:function(e,t,a){e.exports={header:"header_header__3fn4i",container:"header_container__1p_To",logo:"header_logo__14tHM",menu:"header_menu__5m-DF",menu__burger:"header_menu__burger__1Ttem",menu__responsive:"header_menu__responsive__1CzeE",menu__responsive__burger:"header_menu__responsive__burger__1ouWv",link:"header_link__3Qf43",nav:"header_nav__3OwU2",hide:"header_hide__NVi7G"}},18:function(e,t,a){e.exports={content:"blogitem_content__2hU47",content__image:"blogitem_content__image__2_OwN",text__date:"blogitem_text__date__3PuPL",text__title:"blogitem_text__title__3vAaI",text__content:"blogitem_text__content__2E9_Z",text__author:"blogitem_text__author__2KkZF",stats:"blogitem_stats__1MOOu",stats__likes:"blogitem_stats__likes__3D4Zy",stats__commentCount:"blogitem_stats__commentCount__1oZRY"}},20:function(e,t,a){e.exports={container:"blogedit_container__2usZc",form:"blogedit_form__2d9UO",form__file:"blogedit_form__file__GfRCT",form__file__label:"blogedit_form__file__label__3A2gG",form__content:"blogedit_form__content__SARoq",form__button:"blogedit_form__button__BBE5U",message:"blogedit_message__y2jEy",validationError:"blogedit_validationError__1kOTY"}},21:function(e,t,a){e.exports={container:"newblog_container__VUhQU",form:"newblog_form__YKZ_-",form__file:"newblog_form__file__4_5Z5",form__file__label:"newblog_form__file__label__CLfGS",form__content:"newblog_form__content__9qbpi",form__button:"newblog_form__button__33k4H",message:"newblog_message__2Sxz8",validationError:"newblog_validationError__2BjM1"}},24:function(e,t,a){e.exports={container:"comments_container___gqop",item:"comments_item__hJxOv",authorDate:"comments_authorDate__1FMV_"}},25:function(e,t,a){e.exports={container:"commentlist_container__2YbmO",form:"commentlist_form__2hf5g",form__content:"commentlist_form__content__PwMvL",form__button:"commentlist_form__button__h5MVS",validationError:"commentlist_validationError__3aP9N"}},29:function(e,t,a){e.exports={container:"app_container__3FwrV",main:"app_main__1NOZK",fixedPosition:"app_fixedPosition__1KJpp",message:"app_message__1-pAx"}},36:function(e,t,a){e.exports={container:"bloglist_container__VIv8d",blog:"bloglist_blog__18bdB"}},5:function(e,t,a){e.exports={container:"blog_container__1yngQ",content:"blog_content__3Mdwr",content__title:"blog_content__title__1KPYd",content__image:"blog_content__image__3vx0v",content__date:"blog_content__date__2W8o9",content__authorTime:"blog_content__authorTime__3UoGz",content__content:"blog_content__content__2CJUX",likes:"blog_likes__2wpbo",likes__text:"blog_likes__text__1XXJj",actions:"blog_actions__38f5o",actions__follow:"blog_actions__follow__yuHh8",actions__save:"blog_actions__save__3T0XJ",actions__like:"blog_actions__like__1-Tvs",actions__edit:"blog_actions__edit__3FSGp",actions__delete:"blog_actions__delete__dgAIf",none:"blog_none__2awqw"}},50:function(e,t,a){},52:function(e,t,a){e.exports={filterField:"filter_filterField__2oh5H"}},53:function(e,t,a){e.exports=a(85)},58:function(e,t,a){},8:function(e,t,a){e.exports={container:"navmenu_container__2wo4C",menuStats:"navmenu_menuStats__kQ_sW",profile:"navmenu_profile__2WvcC",profile__image:"navmenu_profile__image__2d4Wc",profile__name__thin:"navmenu_profile__name__thin__5HZwF",profile__name__user:"navmenu_profile__name__user__1efZ1",profile__name__status:"navmenu_profile__name__status__23xlR",links:"navmenu_links__1OFMz",links__link:"navmenu_links__link__m0tyZ",stats__item:"navmenu_stats__item__XOSZo",logout:"navmenu_logout__1Ym0e"}},82:function(e,t,a){e.exports={message:"dashboard_message__2ze2W"}},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),s=a.n(o),c=(a(58),a(3)),l=a(29),i=a.n(l),u=a(2),_=a(6),m=a(23),d=a(1),f=a.n(d),b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(n.useState)(a),o=Object(c.a)(r,2),s=o[0],l=o[1],i=function(e){l(e.target.value)},u=function(){l(a)};return{attributes:{type:e,placeholder:t,value:s,onChange:i},reset:u}},p=a(7),g=a.n(p),E=function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.awrap(g.a.post("/login",e));case 3:return t=a.sent,a.abrupt("return",t.data);case 7:throw a.prev=7,a.t0=a.catch(0),a.t0.response.data;case 10:case"end":return a.stop()}}),null,null,[[0,7]])},v=function(e){return{type:"USER_LOGIN",payload:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":case"USER_UPDATE":return t.payload;case"USER_LOGOUT":return null;default:return e}},N=function(e){return{type:"MESSAGE_UPDATE",payload:e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGE_UPDATE":return t.payload;default:return e}},O=a(16),x=a.n(O),k={user_login:v,message_update:N},S=Object(u.b)(null,k)((function(e){var t=b("text","Email"),a=b("password","Password"),o=Object(n.useState)(""),s=Object(c.a)(o,2),l=s[0],i=s[1],u=Object(n.useState)(""),m=Object(c.a)(u,2),d=m[0],p=m[1];return r.a.createElement("div",{className:x.a.container},r.a.createElement("div",{className:x.a.image}),r.a.createElement("form",{onSubmit:function(n){var r,o,s,c;return f.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n.preventDefault(),r=!1,t.attributes.value.length<5&&(i("Email must be at least 5 characters."),r=!0),a.attributes.value.length<5&&(p("Password must be at least 5 characters."),r=!0),!r){l.next=8;break}return setTimeout((function(){return i("")}),4e3),setTimeout((function(){return p("")}),4e3),l.abrupt("return");case 8:return l.prev=8,l.next=11,f.a.awrap(E({email:t.attributes.value,password:a.attributes.value}));case 11:o=l.sent,s=o.user,c=o.token,e.user_login(s),"Bearer ".concat(c),window.localStorage.setItem("token",c),window.localStorage.setItem("user",JSON.stringify(s)),l.next=26;break;case 20:l.prev=20,l.t0=l.catch(8),e.message_update(l.t0.error),setTimeout((function(){return e.message_update("")}),3e3),t.reset(),a.reset();case 26:case"end":return l.stop()}}),null,null,[[8,20]])},className:x.a.form},r.a.createElement("input",Object.assign({},t.attributes,{className:x.a.form__field})),r.a.createElement("input",Object.assign({},a.attributes,{className:x.a.form__field})),l&&r.a.createElement("p",{className:x.a.validationError},l),d&&r.a.createElement("p",{className:x.a.validationError},d),r.a.createElement("button",{type:"submit",value:"Login",className:"".concat(x.a.form__button," ").concat(x.a.form__button__login)},"Login")),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement("span",{className:x.a.bold},r.a.createElement(_.b,{to:"/register",className:x.a.link},"Register"))))})),y="/api/blogs",j=function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.awrap(g.a.get(y));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0.message;case 10:case"end":return t.stop()}}),null,null,[[0,7]])},T=function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.awrap(g.a.get("".concat(y,"/").concat(e)));case 3:return t=a.sent,a.abrupt("return",t.data);case 7:throw a.prev=7,a.t0=a.catch(0),a.t0.message;case 10:case"end":return a.stop()}}),null,null,[[0,7]])},C=function(e){var t,a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}},n.prev=1,n.next=4,f.a.awrap(g.a.post(y,e,t));case 4:return a=n.sent,n.abrupt("return",a.data);case 8:throw n.prev=8,n.t0=n.catch(1),n.t0.response.data.error;case 11:case"end":return n.stop()}}),null,null,[[1,8]])},D=function(e,t){var a,n,r;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a="".concat(y,"/").concat(e),n={headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}},o.prev=2,o.next=5,f.a.awrap(g.a.put(a,t,n));case 5:return r=o.sent,o.abrupt("return",r.data);case 9:throw o.prev=9,o.t0=o.catch(2),o.t0.response.data.error;case 12:case"end":return o.stop()}}),null,null,[[2,9]])},B=function(e){var t,a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t="".concat(y,"/").concat(e),a={headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}},r.prev=2,r.next=5,f.a.awrap(g.a.delete(t,a));case 5:return n=r.sent,r.abrupt("return",n.data);case 9:throw r.prev=9,r.t0=r.catch(2),r.t0.message;case 12:case"end":return r.stop()}}),null,null,[[2,9]])},U=a(28),I=function(e){return{type:"BLOGS_INIT",payload:e}},L=function(e){return{type:"BLOGS_ADD",payload:e}},R=function(e){return{type:"BLOGS_UPDATE",payload:e}},A=function(e){return{type:"BLOGS_DELETE",id:e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BLOGS_INIT":return Object(U.a)(t.payload);case"BLOGS_ADD":return[].concat(Object(U.a)(e),[t.payload]);case"BLOGS_UPDATE":var a=e.findIndex((function(e){return e.id===t.payload.id}));return e.slice(0,a).concat(t.payload).concat(e.slice(a+1));case"BLOGS_DELETE":return e.filter((function(e){return e.id!==t.id}));default:return e}},P=a(18),G=a.n(P),M={blogs_update:R,blogs_delete:A},W=Object(u.b)((function(e){return{user:e.user}}),M)((function(e){var t=e.blog,a=t.id,n=t.title,o=t.content,s=t.author,c=t.likes,l=t.pictureUrl,i=t.comments,u=t.updatedAt;return r.a.createElement("div",{className:G.a.blog},r.a.createElement("div",{className:G.a.content},l&&r.a.createElement(_.b,{to:"/blogs/".concat(a)},r.a.createElement("img",{src:l,alt:"uploaded-image",className:G.a.content__image})),r.a.createElement("p",{className:G.a.text__date},function(e){if(e){var t=new Date(e);return"".concat(t.getMonth()+1,".").concat(t.getDate(),".").concat(t.getFullYear())}}(u)),r.a.createElement("p",null,r.a.createElement(_.b,{to:"/blogs/".concat(a),className:G.a.text__title},n)),r.a.createElement("p",{className:G.a.text__content},function(e){return e.length>100?"".concat(e.slice(0,100),"..."):e}(o)),r.a.createElement("p",{className:G.a.text__author},"by ",s.name)),r.a.createElement("div",{className:G.a.stats},r.a.createElement("p",{className:G.a.stats__likes},"Likes ",c),r.a.createElement("p",{className:G.a.stats__commentCount},"Comments ",i.length)))})),J=a(36),Z=a.n(J),Y={blogs_init:I,blogs_add:L,message_update:N},z=Object(u.b)((function(e){return{user:e.user,blogs:e.blogs,message:e.message,filter:e.filter}}),Y)((function(e){return Object(n.useEffect)((function(){j().then((function(t){e.blogs_init(t)}))}),[]),r.a.createElement("ul",{className:Z.a.container},(t=e.blogs,a=e.filter,t.filter((function(e){return e.title.includes(a)})).map((function(e){return r.a.createElement("li",{key:e.id,className:Z.a.blog},r.a.createElement(W,{blog:e}))}))));var t,a})),K=(a(82),Object(u.b)((function(e){return{message:e.message}}))((function(e){return r.a.createElement(z,null)}))),q=function(){return r.a.createElement("h1",null,"Not Found")},V=function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.awrap(g.a.post("".concat("/api/users"),e));case 3:return t=a.sent,a.abrupt("return",t.data);case 7:throw a.prev=7,a.t0=a.catch(0),a.t0.response.data;case 10:case"end":return a.stop()}}),null,null,[[0,7]])},X=function(e){var t,a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}},a=JSON.parse(window.localStorage.getItem("user")).id,r.prev=2,r.next=5,f.a.awrap(g.a.patch("".concat("/api/users","/").concat(a),e,t));case 5:return n=r.sent,r.abrupt("return",n.data);case 9:throw r.prev=9,r.t0=r.catch(2),r.t0.response.data;case 12:case"end":return r.stop()}}),null,null,[[2,9]])},H=a(50),Q=a.n(H),$=Object(u.b)((function(e){return{user:e.user}}))((function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){(function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(g.a.get("/api/users"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))})().then((function(e){return o(e)}))}),[]);return r.a.createElement("div",{className:Q.a.container},r.a.createElement("h1",null,"Users"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Users"),r.a.createElement("th",null,"Blogs Created"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(_.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))})))))})),ee=function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),o=a[0],s=a[1];console.log(o),Object(n.useEffect)((function(){(function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.awrap(g.a.get("".concat("/api/users","/").concat(e)));case 3:return t=a.sent,a.abrupt("return",t.data);case 7:throw a.prev=7,a.t0=a.catch(0),a.t0.response.data;case 10:case"end":return a.stop()}}),null,null,[[0,7]])})(e.match.params.id).then((function(e){return s(e)})).catch((function(e){return console.log(e)}))}),[]);return o?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,o.name,"'s Blogs"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Content"),r.a.createElement("th",null,"Likes"))),r.a.createElement("tbody",null,o.blogs.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.content),r.a.createElement("td",null,e.likes))}))))):r.a.createElement("h1",null,"Loading")},te=a(37),ae=a(24),ne=a.n(ae),re=function(e){var t=e.comments;return r.a.createElement("ul",{className:ne.a.container},t.map((function(e){return r.a.createElement("li",{key:e.id,className:ne.a.item},r.a.createElement("div",{className:ne.a.authorDate},r.a.createElement("p",{className:ne.a.item__author},e.author.name),r.a.createElement("p",{className:ne.a.item__date},function(e){if(e){var t=new Date(e);return"".concat(t.getMonth()+1,".").concat(t.getDate(),".").concat(t.getFullYear())}}(e.date))),r.a.createElement("p",{className:ne.a.item__content},e.comment))})))},oe=function(e,t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(g.a.post("/api/blogs/".concat(e,"/comments"),t));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},se=a(25),ce=a.n(se),le=Object(u.b)((function(e){return{user:e.user}}))((function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],s=a[1],l=b(null,"Comment"),i=Object(n.useState)(""),u=Object(c.a)(i,2),_=u[0],m=u[1];Object(n.useEffect)((function(){(function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(g.a.get("/api/blogs/".concat(e,"/comments")));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))})(e.id).then((function(e){s(e)}))}),[]);return r.a.createElement("div",{className:ce.a.container},r.a.createElement(re,{comments:o}),e.user&&r.a.createElement("form",{onSubmit:function(t){var a,n,r;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.preventDefault(),a=!1,l.attributes.value.length<3&&(m("Comment must be at least 3 characters."),a=!0),!a){o.next=6;break}return setTimeout((function(){return m("")}),4e3),o.abrupt("return");case 6:return n={comment:l.attributes.value,author:e.user.id,authorName:e.user.name},l.reset(),o.prev=8,o.next=11,f.a.awrap(oe(e.id,n));case 11:(r=o.sent).author={id:r.author,name:e.user.name},s((function(e){return[].concat(Object(U.a)(e),[r])})),o.next=19;break;case 16:o.prev=16,o.t0=o.catch(8),console.log(o.t0.message);case 19:case"end":return o.stop()}}),null,null,[[8,16]])},className:ce.a.form},r.a.createElement("textarea",Object.assign({},l.attributes,{className:ce.a.form__content})),_&&r.a.createElement("p",{className:ce.a.validationError},_),r.a.createElement("button",{type:"submit",className:ce.a.form__button},"Post Comment")))})),ie=a(5),ue=a.n(ie),_e={blogs_update:R,blogs_delete:A,user_update:function(e){return{type:"USER_UPDATE",payload:e}},message_update:N},me=Object(u.b)((function(e){return{user:e.user,blogs:e.blogs}}),_e)((function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),o=a[0],s=a[1],l=e.user,i=e.user_update;Object(n.useEffect)((function(){T(e.match.params.id).then((function(e){return s(e),D(e.id,Object(te.a)({},e,{views:e.views+1})),function(){console.log("Component has been unmounted")}}))}),[]);var u=function(e,t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=Object(te.a)({},e)).likes="INCREMENT"===t?a.likes+1:a.likes-1,n.next=4,f.a.awrap(D(e.id,a));case 4:a=n.sent,s(a);case 6:case"end":return n.stop()}}))},_=function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(X(e));case 2:t=a.sent,i(t),window.localStorage.setItem("user",JSON.stringify(t));case 5:case"end":return a.stop()}}))},m=function(e){return{op:"$push",field:"followedUsers",value:e}},d=function(e){return{op:"$pull",field:"followedUsers",value:e}},b=function(e){return{op:"$push",field:"savedBlogs",value:e}},p=function(e){return{op:"$pull",field:"savedBlogs",value:e}},g=function(e){return{op:"$push",field:"likedBlogs",value:e}},E=function(e){return{op:"$pull",field:"likedBlogs",value:e}};return o&&r.a.createElement("div",{className:ue.a.container},r.a.createElement("div",{className:ue.a.content},o.pictureUrl&&r.a.createElement("img",{src:o.pictureUrl,alt:"uploaded-image",className:ue.a.content__image}),r.a.createElement("p",{className:ue.a.content__date},function(e){if(e){var t=new Date(e);return"".concat(t.getMonth()+1,".").concat(t.getDate(),".").concat(t.getFullYear())}}(o.updatedAt)),r.a.createElement("h1",{className:ue.a.content__title},o.title),r.a.createElement("div",{className:ue.a.content__authorTime},r.a.createElement("p",{className:ue.a.content__authorTime__author},"By ",o.author.name),r.a.createElement("p",{className:ue.a.content__authorTime__time},o.readTime," min read")),r.a.createElement("p",{className:ue.a.content__content},o.content)),r.a.createElement("div",{className:ue.a.likes},r.a.createElement("p",{className:ue.a.likes__text},o.likes," ",r.a.createElement("span",{className:ue.a.likes__bold},"likes"))),l&&l.id!==o.author.id&&r.a.createElement("div",{className:ue.a.actions},l&&l.id!==o.author.id&&function(e){if(l)return-1===l.followedUsers.findIndex((function(t){return t===e}))?r.a.createElement("button",{onClick:function(){return _(m(e))},className:ue.a.actions__follow},"Follow"):r.a.createElement("button",{onClick:function(){return _(d(e))},className:ue.a.actions__follow},"Unfollow")}(o.author.id),l&&l.id!==o.author.id&&function(e){if(l)return-1===l.likedBlogs.findIndex((function(t){return t===e.id}))?r.a.createElement("button",{onClick:function(){_(g(e.id)),u(e,"INCREMENT")},className:ue.a.actions__like},"Like"):r.a.createElement("button",{onClick:function(){_(E(e.id)),u(e,"DECREMENT")},className:ue.a.actions__like},"Unlike")}(o),l&&l.id!==o.author.id&&function(e){if(l)return-1===l.savedBlogs.findIndex((function(t){return t===e}))?r.a.createElement("button",{onClick:function(){return _(b(e))},className:ue.a.actions__save},"Save"):r.a.createElement("button",{onClick:function(){return _(p(e))},className:ue.a.actions__save},"Unsave")}(o.id)),l&&l.id===o.author.id&&r.a.createElement("div",{className:"".concat(l&&l.id===o.author.id?ue.a.actions:ue.a.none)},r.a.createElement("button",{onClick:function(){return e.history.push("/blogs/".concat(o.id,"/edit"))},className:ue.a.actions__edit},"Edit"),r.a.createElement("button",{onClick:function(){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.awrap(B(t));case 3:a=n.sent,e.blogs_delete(a.id),e.message_update("".concat(o.title," has been deleted.")),setTimeout((function(){return e.message_update(null)}),3e3),e.history.push("/"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0),e.message_update("There was an error deleting the blog."),setTimeout((function(){return e.message_update(null)}),3e3);case 15:case"end":return n.stop()}}),null,null,[[0,10]])}(o.id)},className:ue.a.actions__delete},"Delete")),r.a.createElement(le,{id:o.id}))})),de=a(20),fe=a.n(de),be={message_update:N,blogs_update:R},pe=Object(u.b)((function(e){return{user:e.user,message:e.message}}),be)((function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)(""),i=Object(c.a)(l,2),u=i[0],_=i[1],m=Object(n.useState)(""),d=Object(c.a)(m,2),b=d[0],p=d[1],g=Object(n.useState)(null),E=Object(c.a)(g,2),v=E[0],h=E[1],N=Object(n.useState)(""),w=Object(c.a)(N,2),O=w[0],x=w[1],k=Object(n.useState)(""),S=Object(c.a)(k,2),y=S[0],j=S[1];Object(n.useEffect)((function(){T(e.match.params.id).then((function(e){s(e.title),_(e.content),p(e.title)}))}),[]);var C=function(t){var a,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.preventDefault(),a=!1,o.length<3&&(x("Title must be at least 3 characters."),a=!0),u.length<3&&(j("Content must be at least 3 characters."),a=!0),!a){s.next=8;break}return setTimeout((function(){return x("")}),4e3),setTimeout((function(){return j("")}),4e3),s.abrupt("return");case 8:return(n=new FormData).set("title",o),n.set("content",u),n.set("image",v),n.set("author",e.user.id),s.prev=13,s.next=16,f.a.awrap(D(e.match.params.id,n));case 16:r=s.sent,e.blogs_update(r),e.message_update("".concat(b," updated to ").concat(o)),setTimeout((function(){return e.message_update(null)}),3e3),e.history.push("/blogs/".concat(e.match.params.id)),s.next=28;break;case 23:s.prev=23,s.t0=s.catch(13),console.log(s.t0.message),e.message_update(s.t0),setTimeout((function(){return e.message_update(null)}),3e3);case 28:case"end":return s.stop()}}),null,null,[[13,23]])};return r.a.createElement("div",{className:fe.a.container},e.message&&r.a.createElement("p",{className:fe.a.message},e.message),r.a.createElement("form",{onSubmit:C,className:fe.a.form},r.a.createElement("input",{type:"text",value:o,onChange:function(e){return s(e.target.value)}}),O&&r.a.createElement("p",{className:fe.a.validationError},O),r.a.createElement("textarea",{value:u,onChange:function(e){return _(e.target.value)},className:fe.a.form__content}),y&&r.a.createElement("p",{className:fe.a.validationError},y),r.a.createElement("label",{htmlFor:"file_upload",className:fe.a.form__file__label},v?v.name:"Choose File"),r.a.createElement("input",{type:"file",name:"image",id:"file_upload",onChange:function(e){return h(e.target.files[0])},className:fe.a.form__file}),r.a.createElement("button",{type:"submit",className:fe.a.form__button,onClick:C},"Update Post")))})),ge=a(21),Ee=a.n(ge),ve={blogs_add:L,message_update:N},he=Object(u.b)((function(e){return{user:e.user,message:e.message}}),ve)((function(e){var t=b("text","Title"),a=b(null,"Content"),o=Object(n.useState)(null),s=Object(c.a)(o,2),l=s[0],i=s[1],u=Object(n.useState)(""),_=Object(c.a)(u,2),m=_[0],d=_[1],p=Object(n.useState)(""),g=Object(c.a)(p,2),E=g[0],v=g[1],h=function(n){var r,o,s;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.preventDefault(),r=!1,t.attributes.value.length<3&&(d("Title must be at least 3 characters."),r=!0),a.attributes.value.length<3&&(v("Content must be at least 3 characters."),r=!0),!r){c.next=8;break}return setTimeout((function(){return d("")}),4e3),setTimeout((function(){return v("")}),4e3),c.abrupt("return");case 8:return(o=new FormData).set("title",t.attributes.value),o.set("content",a.attributes.value),o.set("image",l),o.set("author",e.user.id),c.prev=13,c.next=16,f.a.awrap(C(o));case 16:s=c.sent,e.blogs_add(s),e.message_update("New Blog Created: ".concat(t.attributes.value)),setTimeout((function(){return e.message_update(null)}),3e3),t.reset(),a.reset(),e.history.push("/"),c.next=30;break;case 25:c.prev=25,c.t0=c.catch(13),console.log(c.t0),e.message_update(c.t0),setTimeout((function(){return e.message_update(null)}),3e3);case 30:case"end":return c.stop()}}),null,null,[[13,25]])};return r.a.createElement("div",{className:Ee.a.container},e.message&&r.a.createElement("p",{className:Ee.a.message},e.message),r.a.createElement("form",{onSubmit:h,className:Ee.a.form},r.a.createElement("input",t.attributes),m&&r.a.createElement("p",{className:Ee.a.validationError},m),r.a.createElement("textarea",Object.assign({},a.attributes,{className:Ee.a.form__content})),E&&r.a.createElement("p",{className:Ee.a.validationError},E),r.a.createElement("label",{htmlFor:"file_upload",className:Ee.a.form__file__label},l?l.name:"Choose File"),r.a.createElement("input",{type:"file",name:"image",id:"file_upload",onChange:function(e){i(e.target.files[0])},className:Ee.a.form__file}),r.a.createElement("button",{type:"submit",className:Ee.a.form__button,onClick:h},"Create Post")))})),Ne=a(11),we=a.n(Ne),Oe={user_login:v,message_update:N},xe=Object(u.b)(null,Oe)((function(e){var t=b("text","Name"),a=b("email","Email"),o=b("password","Password"),s=Object(n.useState)(""),l=Object(c.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)(""),d=Object(c.a)(m,2),p=d[0],g=d[1],E=Object(n.useState)(""),v=Object(c.a)(E,2),h=v[0],N=v[1];return r.a.createElement("div",{className:we.a.container},r.a.createElement("div",{className:we.a.image}),r.a.createElement("form",{onSubmit:function(n){var r,s,c,l,i;return f.a.async((function(_){for(;;)switch(_.prev=_.next){case 0:if(n.preventDefault(),r=!1,t.attributes.value.length<3&&(u("Name must be at least 3 characters."),r=!0),a.attributes.value.length<5&&(g("Email must be at least 5 characters."),r=!0),o.attributes.value.length<5&&(N("Password must be at least 5 characters."),r=!0),!r){_.next=10;break}return setTimeout((function(){return u("")}),4e3),setTimeout((function(){return g("")}),4e3),setTimeout((function(){return N("")}),4e3),_.abrupt("return");case 10:return s={name:t.attributes.value,email:a.attributes.value,password:o.attributes.value},_.prev=11,_.next=14,f.a.awrap(V(s));case 14:c=_.sent,l=c.user,i=c.token,e.user_login(l),window.localStorage.setItem("token",i),window.localStorage.setItem("user",JSON.stringify(l)),e.message_update("Welcome to BlogWorld ".concat(l.name,".")),setTimeout((function(){return e.message_update("")}),3e3),e.history.push("/"),_.next=31;break;case 25:_.prev=25,_.t0=_.catch(11),console.log(_.t0),t.reset(),a.reset(),o.reset();case 31:case"end":return _.stop()}}),null,null,[[11,25]])},className:we.a.form},r.a.createElement("input",Object.assign({},t.attributes,{className:we.a.form__field})),r.a.createElement("input",Object.assign({},a.attributes,{className:we.a.form__field})),r.a.createElement("input",Object.assign({},o.attributes,{className:we.a.form__field})),i&&r.a.createElement("p",{className:we.a.validationError},i),p&&r.a.createElement("p",{className:we.a.validationError},p),h&&r.a.createElement("p",{className:we.a.validationError},h),r.a.createElement("button",{type:"submit",value:"Register",className:"".concat(we.a.form__button," ").concat(we.a.form__button__login)},"Register")),r.a.createElement("p",null,"Already have an account? ",r.a.createElement("span",{className:we.a.bold},r.a.createElement(_.b,{to:"/login",className:we.a.link},"Login"))))})),ke=(a(83),a(51)),Se=a.n(ke),ye=a(52),je=a.n(ye),Te={updateFilter:function(e){return{type:"UPDATE_FILTER",payload:e}}},Ce=Object(u.b)((function(e){return{filter:e.filter}}),Te)((function(e){var t=e.filter,a=e.updateFilter;return r.a.createElement("input",{type:"text",id:"filter",value:t,onChange:function(e){return a(e.target.value)},className:je.a.filterField,placeholder:"Search"})})),De=function(){return{type:"TOGGLE_SIDEBAR"}},Be=function(){return{type:"CLOSE_SIDEBAR"}},Ue=a(17),Ie=a.n(Ue),Le={toggleSidebar:De},Re=Object(u.b)((function(e){return{isOpen:e.isSidebarOpen,user:e.user}}),Le)((function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){e.setBurgerRef(t)}),[]),r.a.createElement("header",{className:Ie.a.header},r.a.createElement("div",{className:Ie.a.container},r.a.createElement("div",{className:Ie.a.logo},r.a.createElement(_.b,{to:"/",className:Ie.a.link},"TIL")),r.a.createElement(Ce,null),r.a.createElement("div",{ref:t,className:e.user?Ie.a.menu:Ie.a.menu__responsive},r.a.createElement(Se.a,{className:Ie.a.menu__burger,isOpen:e.isOpen,onClick:e.toggleSidebar})),r.a.createElement("nav",{className:e.user?Ie.a.hide:Ie.a.nav},r.a.createElement(_.b,{to:"/login",className:Ie.a.button__link},"Login"),r.a.createElement(_.b,{to:"/register",className:Ie.a.button__link},"Register"))))})),Ae=function(){return r.a.createElement("footer",null)},Fe=a(8),Pe=a.n(Fe),Ge={user_logout:function(){return{type:"USER_LOGOUT"}},closeSidebar:Be},Me=Object(u.b)((function(e){return{user:e.user}}),Ge)(Object(m.g)((function(e){return r.a.createElement("nav",{className:Pe.a.container},r.a.createElement("div",{className:Pe.a.menuStats},r.a.createElement("div",{className:Pe.a.profile},r.a.createElement("div",{className:Pe.a.profile__image}),r.a.createElement("div",{className:Pe.a.profile__name},r.a.createElement("h4",{className:Pe.a.profile__name__user},r.a.createElement("span",{className:Pe.a.profile__name__thin},"Hi, "),e.user.name))),r.a.createElement("div",{className:Pe.a.links},r.a.createElement(_.b,{to:"/blogs/new",className:Pe.a.links__link,onClick:e.closeSidebar},"New Post"),r.a.createElement(_.b,{to:"/",className:Pe.a.links__link,onClick:e.closeSidebar},"Blogs")),r.a.createElement("div",{className:Pe.a.stats},r.a.createElement("div",{className:Pe.a.stats__item},r.a.createElement("p",null,"Blog Count:"),r.a.createElement("p",null,e.user.blogs.length)),r.a.createElement("div",{className:Pe.a.stats__item},r.a.createElement("p",null,"Liked Count:"),r.a.createElement("p",null,e.user.likedBlogs.length)),r.a.createElement("div",{className:Pe.a.stats__item},r.a.createElement("p",null,"Following Count:"),r.a.createElement("p",null,e.user.followedUsers.length)))),r.a.createElement("button",{className:Pe.a.logout,onClick:function(){window.localStorage.removeItem("user"),window.localStorage.removeItem("token"),e.user_logout(),e.closeSidebar(),e.history.push("/")}},"Sign Out"))}))),We=a(9),Je=a.n(We),Ze={toggleSidebar:De,closeSidebar:Be},Ye=Object(u.b)((function(e){return{isOpen:e.isSidebarOpen,user:e.user}}),Ze)((function(e){var t=Object(n.useRef)(),a=function(a){e.burgerRef.current.firstChild!==a.target&&t.current&&!t.current.contains(a.target)&&e.closeSidebar()};return Object(n.useEffect)((function(){return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}})),r.a.createElement("div",{ref:t,className:"".concat(Je.a.sidebar," ").concat(e.isOpen?Je.a.show:null," ").concat(e.user?Je.a.reducedWidth:null)},e.user?r.a.createElement(Me,null):r.a.createElement("div",{className:Je.a.container},r.a.createElement("div",{className:Je.a.text},r.a.createElement("h4",{className:Je.a.text__title},"Welcome to TIL"),r.a.createElement("p",{className:Je.a.text__content},"We're a community of aspiring developers sharing our knowledge and experience hoping that someone will walk away learning something new.")),r.a.createElement("div",{className:Je.a.buttons,onClick:e.toggleSidebar},r.a.createElement("button",{className:"".concat(Je.a.button," ").concat(Je.a.button___green)},r.a.createElement(_.b,{to:"/login",className:Je.a.button__link},"Login")),r.a.createElement("button",{className:"".concat(Je.a.button," ").concat(Je.a.button___light)},r.a.createElement(_.b,{to:"/register",className:Je.a.button__link},"Register")))))})),ze={user_login:v,blogs_init:I},Ke=Object(u.b)((function(e){return{user:e.user,isOpen:e.isSidebarOpen,message:e.message}}),ze)((function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),o=a[0],s=a[1];return Object(n.useEffect)((function(){var t=window.localStorage.getItem("user");t&&e.user_login(JSON.parse(t)),j().then((function(t){e.blogs_init(t)}))}),[]),r.a.createElement(_.a,null,r.a.createElement("div",{className:i.a.container},r.a.createElement(Re,{setBurgerRef:s}),e.message?r.a.createElement("p",{className:i.a.message},e.message):null,r.a.createElement("div",{className:"".concat(i.a.main," ").concat(e.isOpen?i.a.fixedPosition:"")},r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:K}),r.a.createElement(m.b,{exact:!0,path:"/users",component:$}),r.a.createElement(m.b,{exact:!0,path:"/blogs",component:K}),r.a.createElement(m.b,{exact:!0,path:"/register",component:xe}),r.a.createElement(m.b,{path:"/login",render:function(){return e.user?r.a.createElement(m.a,{to:"/"}):r.a.createElement(S,null)}}),r.a.createElement(m.b,{path:"/blogs/new",render:function(t){return e.user?r.a.createElement(he,t):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{path:"/users/:id",component:ee}),r.a.createElement(m.b,{exact:!0,path:"/blogs/:id/edit",component:pe}),r.a.createElement(m.b,{path:"/blogs/:id",component:me}),r.a.createElement(m.b,{component:q})),r.a.createElement(Ye,{burgerRef:o})),r.a.createElement(Ae,null)))})),qe=a(27),Ve=Object(qe.b)({user:h,blogs:F,message:w,filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_FILTER":return t.payload;default:return e}},isSidebarOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SIDEBAR":return!e;case"CLOSE_SIDEBAR":return!1;default:return e}}}),Xe=Object(qe.c)(Ve);s.a.render(r.a.createElement(u.a,{store:Xe},r.a.createElement(Ke,null)),document.getElementById("root"))},9:function(e,t,a){e.exports={sidebar:"sidebar_sidebar__2UqRw",reducedWidth:"sidebar_reducedWidth__18WAP",show:"sidebar_show__2_qeQ",login:"sidebar_login__2XVpq",separator:"sidebar_separator__2mNNd",container:"sidebar_container__1TYtp",text:"sidebar_text__L6eD-",text__title:"sidebar_text__title__3hJK_",text__content:"sidebar_text__content__1qes2",buttons:"sidebar_buttons__1jQc9",button:"sidebar_button__1U7Fy",button___green:"sidebar_button___green__3UXtY",button___light:"sidebar_button___light__3-YD3",button__link:"sidebar_button__link__3ksTB"}}},[[53,1,2]]]);
//# sourceMappingURL=main.d3430700.chunk.js.map